# https://kubernetes.io/docs/reference/access-authn-authz/authentication/#openid-connect-tokens
# https://kubernetes.io/docs/reference/command-line-tools-reference/kube-apiserver/
- op: add
  path: /cluster/apiServer/extraArgs
  value:
    oidc-client-id: "{{ idp_auth.oidc.client_id }}"
    oidc-groups-claim: groups
    oidc-groups-prefix: "oidc:"
    oidc-issuer-url: "{{ idp_auth.oidc.issuer_url }}"
    oidc-username-claim: email
    oidc-username-prefix: "oidc:"
    {% if idp_auth.oidc.client_secret is not none and idp_auth.oidc.client_secret|length %}
    oidc-client-secret: "{{ idp_auth.oidc.client_secret }}"
    {% endif %}
